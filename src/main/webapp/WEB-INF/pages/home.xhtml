<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<a4j:outputPanel>

		<rich:panel id="chatterFeed">

			<table style="cellspacing: 5px">

				<tr>
					<td><h:inputText id="status" style="width: 300px" /> <a4j:commandButton
							value="#{msgs.share}" styleClass="commandButton">
							<a4j:ajax execute="@form" event="click"
								listener="#{homeController.post}" render="chatterFeed">
							</a4j:ajax>
						</a4j:commandButton></td>
				</tr>

			</table>

			<ui:repeat var="feedItems" value="#{feed.items}">

				<h:panelGroup layout="block" class="feed-item">
					<h:panelGroup layout="block" class="feed-item-pic">
						<h:graphicImage
							value="#{feedItems.photoUrl}?oauth_token=#{sessionUser.OAuth.accessToken}"
							height="45" width="45">
						</h:graphicImage>
					</h:panelGroup>
					<h:panelGroup layout="block" class="feed-item-text">
						<a4j:commandLink value="#{feedItems.parent.name}"
							style="padding-right: 5px; text-decoration: none; color: #336699; font-weight: bold; font-size: +1; vertical-align: top;"
							status="waitstatus" ajaxSingle="true"></a4j:commandLink>
						<h:outputText value="#{feedItems.body.text}"
							style="vertical-align: top;" />
						<br />
						<h:outputText value="#{feedItems.createdDate}"
							style="vertical-align: top;">
							<f:convertDateTime locale="#{sessionUser.locale}"
								timeZone="#{sessionUser.timeZone}"
								pattern="#{sessionUser.dateFormatPattern}" type="date" />
						</h:outputText>
						<h:outputText value=" " />
						<h:outputText value="#{msgs.at}" style="vertical-align: top;" />
						<h:outputText value=" " />
						<h:outputText value="#{feedItems.createdDate}">
							<f:convertDateTime locale="#{sessionUser.locale}"
								timeZone="#{sessionUser.timeZone}"
								pattern="#{sessionUser.shortTimeFormat}" type="time" />
						</h:outputText>
						<h:outputText value=" " />
						<h:outputText
							value="#{msgs.via} #{feedItems.clientInfo.applicationName}"
							rendered="#{not empty feedItems.clientInfo}" />

						<br />

						<ui:repeat var="comments" value="#{feedItems.comments.comments}">

							<h:graphicImage
								value="#{feedItems.photoUrl}?oauth_token=#{sessionUser.OAuth.accessToken}"
								height="35" width="35">
							</h:graphicImage>
							<h:panelGroup layout="block" class="feed-item-comment">
								<a4j:commandLink value="#{feedItems.parent.name}"
									style="text-decoration: none; color: color: #336699; font-weight: bold; font-size: +1; vertical-align: top;"
									status="waitstatus" ajaxSingle="true">
								</a4j:commandLink>
								<h:outputText value="#{feedItems.body.text}" />
								<br />
								<h:outputText value="#{comments.createdDate}">
									<f:convertDateTime locale="#{sessionUser.locale}"
										timeZone="#{sessionUser.timeZone}"
										pattern="#{sessionUser.dateFormatPattern}" type="date" />
								</h:outputText>
								<h:outputText value=" " />
								<h:outputText value="#{msgs.at}" />
								<h:outputText value=" " />
								<h:outputText value="#{comments.createdDate}">
									<f:convertDateTime locale="#{sessionUser.locale}"
										timeZone="#{sessionUser.timeZone}"
										pattern="#{sessionUser.shortTimeFormat}" type="time" />
								</h:outputText>
								<h:outputText value=" " />
								<h:outputText value="#{msgs.via}" />
								<h:outputText value=" " />
								<h:outputText value="#{feedItems.clientInfo.applicationName}" />

							</h:panelGroup>
						</ui:repeat>

					</h:panelGroup>

					<div style="clear: both;" />

				</h:panelGroup>

			</ui:repeat>

		</rich:panel>

	</a4j:outputPanel>

</ui:composition>