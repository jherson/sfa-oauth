<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a4j="http://richfaces.org/a4j">

	<a4j:outputPanel>

		<rich:panel id="chatterFeed">

			<table style="cellspacing: 5px">

				<tr>
					<td><h:inputText id="status" style="width:300px" /> <a4j:commandButton
							value="#{msgs.share}" styleClass="commandButton">
							<a4j:ajax execute="@form" event="click"
								listener="#{homeController.post}" render="chatterFeed">
							</a4j:ajax>
						</a4j:commandButton></td>
				</tr>

			</table>

			<ui:repeat var="feedItems" value="#{feed.items}">
				<table style="cellspacing: 5px">
					<tr>

						<td style="width: 40px"><h:graphicImage
								value="#{feedItems.photoUrl}?oauth_token=#{sessionUser.OAuth.accessToken}"
								height="40" width="40">
							</h:graphicImage></td>
						<td><a4j:commandLink value="#{feedItems.parent.name}"
								style="text-decoration: none; color: black; font-weight:bold;"
								status="waitstatus" ajaxSingle="true">
							</a4j:commandLink> #{feedItems.body.text}</td>
					</tr>
					<tr>
					    <td />
						<td><h:outputText value="#{feedItems.createdDate}">
								<f:convertDateTime locale="#{sessionUser.locale}"
									timeZone="#{sessionUser.timeZone}"
									pattern="#{sessionUser.dateFormatPattern}" type="date" />
							</h:outputText>
							<h:outputText value=" " />
							<h:outputText value="#{msgs.at}" />
							<h:outputText value=" " />
							<h:outputText value="#{feedItems.createdDate}">
								<f:convertDateTime locale="#{sessionUser.locale}"
									timeZone="#{sessionUser.timeZone}"
									pattern="#{sessionUser.shortTimeFormat}" type="time" />
							</h:outputText>
							<h:outputText value=" " />
							<h:outputText value="#{msgs.by}" />
							<h:outputText value=" " />
							<h:outputText value="#{feedItems.clientInfo.applicationName}"/></td>


						<ui:repeat var="comments" value="#{feedItems.comments.comments}">
							<table style="cellspacing: 5px">
								<tr>
									<td style="width: 40px"></td>
									<td style="width: 40px"><h:graphicImage
											value="#{comments.user.photo.smallPhotoUrl}?oauth_token=#{sessionUser.OAuth.accessToken}"
											height="40" width="40">
										</h:graphicImage></td>
									<td><a4j:commandLink value="#{comments.user.name}"
											style="text-decoration: none; color: black; font-weight:bold;"
											status="waitstatus" ajaxSingle="true">
										</a4j:commandLink> #{comments.body.text}</td>
								</tr>
								<tr>
								    <td />
								    <td />
									<td><h:outputText value="#{comments.createdDate}">
											<f:convertDateTime locale="#{sessionUser.locale}"
												timeZone="#{sessionUser.timeZone}"
												pattern="#{sessionUser.dateFormatPattern}" type="date" />
										</h:outputText>
										<h:outputText value=" " />
										<h:outputText value="#{msgs.at}" />
										<h:outputText value=" " />
										<h:outputText value="#{comments.createdDate}">
											<f:convertDateTime locale="#{sessionUser.locale}"
												timeZone="#{sessionUser.timeZone}"
												pattern="#{sessionUser.shortTimeFormat}" type="time" />
										</h:outputText>
										<h:outputText value=" " />
										<h:outputText value="#{msgs.by}" />
										<h:outputText value=" " />
										<h:outputText value="#{feedItems.clientInfo.applicationName}"/></td>
								</tr>
							</table>
						</ui:repeat>
					</tr>



				</table>
				<hr />
			</ui:repeat>

		</rich:panel>

	</a4j:outputPanel>

</ui:composition>