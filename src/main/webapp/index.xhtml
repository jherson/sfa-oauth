<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/WEB-INF/templates/default.xhtml">

	<ui:define name="header">

		<ui:include src="/WEB-INF/pages/profile.xhtml" />

		<a4j:outputPanel>

			<h:panelGrid width="100%" columns="3"
				columnClasses="column1,column2,column3">

				<h:panelGrid columns="2" cellspacing="10" width="100%"
					columnClasses="header-logo-column">

					<h:graphicImage id="logo" alt="logo" url="/images/logo.png" />
					<h:outputText value="#{msgs.apptitle}"
						style="font: bold 20px liberation,serif; text-decoration: none; text-align: center; color: black" />

				</h:panelGrid>

				<h:panelGrid columns="2" cellspacing="5" width="100%"
					columnClasses="header-search-field-column,header-search-button-column">

					<h:inputText style="width: 200px;"
						rendered="#{sessionManager.loggedIn}" />

					<a4j:commandButton value="#{msgs.search}"
						styleClass="commandButton" rendered="#{sessionManager.loggedIn}" />

				</h:panelGrid>

				<h:panelGrid columns="3" width="100%" cellspacing="0"
					columnClasses="hdr-user-name,hdr-user-pic,hdr-user-logout">

					<a4j:commandLink value="#{loggedIn.name} (#{loggedIn.profileName})"
						rendered="#{sessionManager.loggedIn}"
						style="font: 16px arial,sans-serif; text-decoration: none; text-align: center; color: black"
						oncomplete="#{rich:component('profilePanel')}.show()"
						status="waitstatus" rerender="#{rich:clientId('profilePanel')}"
						ajaxSingle="true">
					</a4j:commandLink>

					<a4j:commandLink rendered="#{sessionManager.loggedIn}"
						oncomplete="#{rich:component('profilePanel')}.show()"
						status="waitstatus" rerender="#{rich:clientId('profilePanel')}"
						ajaxSingle="true">
						<h:graphicImage value="#{loggedIn.smallPhotoUrl}" height="40"
							width="40">
						</h:graphicImage>
					</a4j:commandLink>

					<h:panelGroup>
						<a4j:commandLink value="#{msgs.logout}"
							style="color:#{a4jSkin.generalTextColor};" render="quoteForm"
							rendered="#{sessionManager.loggedIn}"
							action="#{sessionManager.logout()}">
						</a4j:commandLink>

						<a4j:commandLink value="#{msgs.login}"
							style="color:#{a4jSkin.generalTextColor};" render="quoteForm"
							rendered="#{not sessionManager.loggedIn}"
							action="#{sessionManager.login()}">
						</a4j:commandLink>
					</h:panelGroup>
				</h:panelGrid>

			</h:panelGrid>

		</a4j:outputPanel>

	</ui:define>

	<ui:define name="body">

		<a4j:outputPanel id="mainArea">
			<ui:include src="#{sessionManager.mainArea.template}" />
		</a4j:outputPanel>

	</ui:define>

</ui:composition>