<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/WEB-INF/templates/default.xhtml">

	<ui:define name="header">

		<div id="header-left">

			<div class="header-cell">
				<h:graphicImage id="logo" alt="logo"
					url="/resources/images/logo.png" height="40" width="130" />
			</div>

			<div class="header-cell">
				<h:outputText value="#{msgs.apptitle}"
					style="color:#{a4jSkin.generalTextColor}; font-size: 22px; font-weight: bold" />
			</div>

			<div class="header-cell">
				<h:inputText style="width: 300px; height: 18px;"
					rendered="#{sessionManager.loggedIn}" />
			</div>

			<div class="header-cell">
				<a4j:commandButton value="#{msgs.search}" styleClass="commandButton"
					rendered="#{sessionManager.loggedIn}" />
			</div>

		</div>

		<div id="header-right">			

			<div class="header-cell">
				<a4j:commandLink value="#{sessionUser.name}"
					rendered="#{sessionManager.loggedIn}"
					style="color:#{a4jSkin.generalTextColor}; text-decoration: none; font-size: 12px; font-weight: bold;"
					status="waitstatus" ajaxSingle="true">
					<rich:componentControl target="profilePanel" operation="show" />
				</a4j:commandLink>
			</div>

			<div class="header-cell">
				<a4j:commandLink rendered="#{sessionManager.loggedIn}"
					oncomplete="#{rich:component('profilePanel')}.show()"
					status="waitstatus" rerender="#{rich:clientId('profilePanel')}"
					ajaxSingle="true">
					<h:graphicImage
						value="#{sessionUser.smallPhotoUrl}?oauth_token=#{sessionUser.OAuth.accessToken}"
						height="40" width="40">
					</h:graphicImage>
				</a4j:commandLink>
			</div>

			<div class="header-cell">
				<a4j:commandLink title="#{msgs.logout}" render="quoteForm"
					rendered="#{sessionManager.loggedIn}"
					action="#{sessionManager.logout}">
					<h:graphicImage value="/resources/images/logout.png" alt="logout"
						height="40" width="40" />
				</a4j:commandLink>
			</div>
			
			<div class="header-cell">
				<a4j:commandLink status="waitstatus"
					render="mainArea" execute="@this"
					rendered="#{not sessionManager.loggedIn}"
					actionListener="#{homeController.goToSetup}">
					<h:graphicImage url="/resources/images/settings.png" />
				</a4j:commandLink>
			</div>
			
			<div class="header-cell">
				<a4j:commandLink actionListener="#{homeController.goToSetup}"
					value="#{msgs.setup}"
					status="waitstatus" render="mainArea"
					rendered="#{not sessionManager.loggedIn}"
					style="color:#{a4jSkin.generalTextColor}; text-decoration: none; font-size: 14px;">
				</a4j:commandLink>
			</div>

			<div class="header-cell">
				<a4j:commandLink action="#{sessionManager.login}"
					rendered="#{not sessionManager.loggedIn}">
					<h:graphicImage value="/resources/images/salesforce.png"
						alt="Salesforce" height="30" width="30" />
				</a4j:commandLink>
			</div>

			<div class="header-cell">
				<a4j:commandLink action="#{sessionManager.login}"
					value="#{msgs.salesforceLogin}"
					rendered="#{not sessionManager.loggedIn}"
					style="color:#{a4jSkin.generalTextColor}; text-decoration: none; font-size: 14px;">
				</a4j:commandLink>
			</div>

		</div>

		<div style="clear: both;" />

	</ui:define>

	<ui:define name="topbar">

		<h:panelGroup layout="block">



		</h:panelGroup>

	</ui:define>

	<ui:define name="sidebar">

		<h:panelGroup layout="block" style="padding: 20px 15px 5px 15px;">

			<h:panelGroup layout="block" style="padding: 5px;">

				<a4j:commandLink id="homeLink" rendered="#{sessionManager.loggedIn}"
					status="waitstatus" render="mainArea" execute="@this"
					actionListener="#{homeController.showHome}">
					<h:graphicImage id="home" alt="home"
						url="/images/menubar/home48x48.png" />
				</a4j:commandLink>

			</h:panelGroup>

			<h:panelGroup layout="block" style="padding: 5px;">

				<a4j:commandLink id="quotemanagerLink"
					rendered="#{sessionManager.loggedIn}" status="waitstatus"
					render="mainArea" execute="@this"
					actionListener="#{homeController.viewQuoteManager}">
					<h:graphicImage id="quotemanager" alt="quotemanager"
						url="/images/menubar/quote48x48.png" />
				</a4j:commandLink>

			</h:panelGroup>

		</h:panelGroup>

	</ui:define>

	<ui:define name="content">

		<h:panelGroup id="mainArea">

			<ui:include src="/WEB-INF/pages/#{mainController.mainArea.template}" />

		</h:panelGroup>

	</ui:define>

</ui:composition>