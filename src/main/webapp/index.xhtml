<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/WEB-INF/templates/default.xhtml">	

	<ui:define name="header">

		<ui:include src="/WEB-INF/pages/profile.xhtml" />

		<h:panelGrid width="100%" columns="3"
			columnClasses="column1,column2,column3">

			<h:panelGrid columns="2" cellspacing="5" width="100%">
			    <h:graphicImage id="qb_logo" alt="qb_logo" url="/images/logo.png" />
			    <h:putputText value="Quote Builder" style="font: 16px arial,sans-serif; text-decoration: none; text-align: center; color: black"/>
			</h:panelGrid>

			<h:panelGrid columns="2" cellspacing="5" width="100%"
				columnClasses="userNameColumn,searchButtonColumn">

				<h:inputText value="search" style="width: 200px;"
					rendered="#{sessionManager.loggedIn}" />
				<a4j:commandButton value="Search" styleClass="commandButton"
					rendered="#{sessionManager.loggedIn}" />
			</h:panelGrid>

			<h:panelGrid columns="3" width="100%" cellspacing="0"
				columnClasses="userNameColumn,smallPicColumn,smallPicColumn">

				<a4j:commandLink value="#{user.name} (#{user.profileName})"
					rendered="#{sessionManager.loggedIn}"
					style="font: 16px arial,sans-serif; text-decoration: none; text-align: center; color: black"
					oncomplete="#{rich:component('quoteForm:profilePanel')}.show()"
					status="waitstatus"
					rerender="#{rich:clientId('quoteForm:profilePanel')}"
					ajaxSingle="true">
				</a4j:commandLink>

				<a4j:commandLink rendered="#{sessionManager.loggedIn}"
					oncomplete="#{rich:component('profilePanel')}.show()"
					status="waitstatus" rerender="#{rich:clientId('profilePanel')}"
					ajaxSingle="true">
					<h:graphicImage value="#{user.smallPhotoUrl}" height="40"
						width="40">
					</h:graphicImage>
				</a4j:commandLink>

				<h:panelGroup>
					<a4j:commandLink value="#{msgs.logout}"
						style="color:#{a4jSkin.generalTextColor};" render="quoteForm"
						rendered="#{sessionManager.loggedIn}"
						action="#{sessionManager.logout()}">
					</a4j:commandLink>

					<a4j:commandLink value="#{msgs.login}"
						style="color:#{a4jSkin.generalTextColor};" render="quoteForm"
						rendered="#{not sessionManager.loggedIn}"
						action="#{sessionManager.login()}">
					</a4j:commandLink>
				</h:panelGroup>
			</h:panelGrid>

		</h:panelGrid>

	</ui:define>		

	<ui:define name="body">		    

		<a4j:outputPanel id="mainArea" style="border: none">
			<ui:include src="#{sessionManager.mainArea.template}" />
		</a4j:outputPanel>

	</ui:define>
	
	<rich:jQuery selector="#body" timing="onload" query="$('#body').jqxSplitter({orientation: 'vertical', width: 400, height: 400, panels: [{ size: 200 }, { size: 200}] });" />

</ui:composition>